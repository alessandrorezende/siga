<!--  
<link th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"
	rel="stylesheet" />
<link th:href="@{/webjars/bootstrap/css/bootstrap-theme.min.css}"
	rel="stylesheet" />
<link th:href="@{/webjars/font-awesome/4.6.3/css/font-awesome.min.css}"
	rel="stylesheet" />
<link th:href="@{/css/sb-admin.css}" rel="stylesheet">
-->

	<!-- Bootstrap core JavaScript-->
	<script th:href="@{/webjars/jquery/3.2.1/jquery.min.js}"></script>
	<script src="vendor/popper/popper.min.js"></script>
	<!-- Bootstrap core JavaScript-->
	<script th:href="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
	<!-- Core plugin JavaScript-->
	<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
	
	@PostMapping
	public String tryLogin(Usuario usuario) {
		Usuario u = usuarios.findByUsernameAndPassword(usuario.getUsername(),usuario.getPassword());
		if(u != null) {
			return "redirect:/index";
		}
		return "redirect:/login";
	}
	
	List<Usuario> listaUsuario = usuarios.findAll();
		for(Usuario u : listaUsuario) {
			auth.inMemoryAuthentication().withUser(u.getUsername()).password(u.getPassword()).roles("USER");
		}
	
	
	
	
	
	
	
	@Controller
@RequestMapping("/login")
public class LoginController {
	@Autowired
	private Usuarios usuarios;
	
	@PostMapping
	public String tryLogin(Usuario usuario) {
		Usuario u = usuarios.findByUsernameAndPassword(usuario.getUsername(),usuario.getPassword());
		if(u != null) {
			return "redirect:/index";
		}
		return "login";
	}
	
	@GetMapping
	public ModelAndView getLogin() {
		ModelAndView modelAndView = new ModelAndView("login");
		modelAndView.addObject("notas", notas.findAll());
		return modelAndView;
	}
}

@RequestMapping("/index")
	public ModelAndView index() {
		ModelAndView modelAndView = new ModelAndView("index");
		modelAndView.addObject(new Usuario());
		return modelAndView;
	}


	@RequestMapping("/")
	public String redirectLogin() {
		return "redirect:/login";
	}